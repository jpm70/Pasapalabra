<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Rosco de Protocolos y Redes</title>
    <style>
        /* --- ESTILOS GENERALES Y LAYOUT --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
        }

        h1 {
            color: #00796B; /* Teal oscuro para Redes */
            margin-bottom: 40px;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 900px;
            width: 100%;
        }

        /* --- ESTILOS DEL ROSCO (C칈RCULO DE LETRAS) --- */
        #rosco-container {
            position: relative;
            width: 500px;
            height: 500px;
            margin-bottom: 40px;
            border-radius: 50%;
            border: 5px solid #00796B; /* Borde Teal Principal */
            background-color: #e0f7fa; /* Fondo Teal muy claro */
        }

        .letter-slot {
            position: absolute;
            width: 50px;
            height: 50px;
            line-height: 50px;
            text-align: center;
            border-radius: 50%;
            font-size: 1.2em;
            font-weight: bold;
            color: white;
            transition: background-color 0.3s, transform 0.3s;
            cursor: default;
        }

        /* Colores espec칤ficos para Protocolos y Redes */
        .status-default { background-color: #4DB6AC; border: 2px solid #00796B; } /* Teal medio */
        .status-current { background-color: #ff9800; border: 3px solid #f57c00; transform: scale(1.2); z-index: 10; } /* Naranja (activo) */
        .status-correct { background-color: #43a047; border: 2px solid #2e7d32; } /* Verde (Acierto) */
        .status-incorrect { background-color: #e53935; border: 2px solid #c62828; } /* Rojo (Fallo) */
        .status-passed { background-color: #9e9e9e; border: 2px solid #757575; } /* Gris (Pasapalabra) */


        /* --- 츼REA DE JUEGO (DEFINICI칍N Y ENTRADA) --- */
        #definition-area {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            text-align: center;
            margin-bottom: 30px;
        }

        #current-letter {
            font-size: 2.5em;
            color: #00796B;
            margin-bottom: 10px;
        }

        #definition {
            font-size: 1.2em;
            margin: 15px 0;
            min-height: 50px;
        }

        #input-area {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        #answer-input {
            padding: 10px;
            font-size: 1.1em;
            border: 2px solid #ccc;
            border-radius: 5px;
            width: 70%;
            max-width: 300px;
        }

        .action-button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #submit-button { background-color: #43a047; } /* Verde */
        #submit-button:hover { background-color: #2e7d32; }

        #pass-button { background-color: #ff9800; } /* Naranja */
        #pass-button:hover { background-color: #f57c00; }

        /* --- PUNTUACI칍N Y MENSAJES FINALES --- */
        #score-board {
            margin-top: 20px;
            font-size: 1.2em;
            display: flex;
            gap: 30px;
            font-weight: bold;
        }

        #final-message {
            margin-top: 40px;
            padding: 20px;
            background-color: #fff3e0;
            border: 3px solid #ff9800;
            border-radius: 10px;
            font-size: 1.5em;
            display: none; /* Oculto inicialmente */
        }
        
        .reset-button {
            margin-top: 20px;
            background-color: #00796B; /* Bot칩n Teal principal */
        }

        /* Media Query para pantallas peque침as (m칩viles) */
        @media (max-width: 600px) {
            #rosco-container {
                width: 300px;
                height: 300px;
            }
            .letter-slot {
                width: 30px;
                height: 30px;
                line-height: 30px;
                font-size: 0.9em;
            }
            #definition-area {
                padding: 15px;
            }
            #answer-input {
                width: 60%;
            }
            .action-button {
                padding: 8px 15px;
            }
        }
    </style>
</head>
<body>

    <div class="game-container">
        <h1>El Rosco de Protocolos y Redes 游깷</h1>
        
        <div id="rosco-container">
            </div>

        <div id="definition-area">
            <div id="current-letter"></div>
            <p id="definition">Pulsa **Empezar** para iniciar el Rosco.</p>

            <div id="input-area">
                <input type="text" id="answer-input" placeholder="Escribe tu respuesta..." disabled>
                <button id="submit-button" class="action-button" disabled>Enviar</button>
                <button id="pass-button" class="action-button" disabled>Pasapalabra</button>
            </div>
            
            <button id="start-button" class="action-button reset-button">Empezar Rosco</button>

        </div>
        
        <div id="score-board">
            <span id="score-correct" style="color: #43a047;">Aciertos: 0</span>
            <span id="score-incorrect" style="color: #e53935;">Fallos: 0</span>
            <span id="score-remaining">Pendientes: 27</span>
        </div>

        <div id="final-message"></div>

    </div>
    
    <script>
        const ROPE_RADIUS = 250; // Radio del c칤rculo del Rosco (en p칤xeles)
        const CENTER_OFFSET = 250; // La mitad de 500px (ancho/alto del rosco)
        const SLOT_SIZE = 50; // Tama침o del slot de la letra
        const LETTERS = "ABCDEFGHIJKLMNOPQRSTUVWXYZ칌";

        // --- BANCO DE PALABRAS: PROTOCOLOS Y REDES (27 en total) ---
        const wordBank = [
            { id: 'A', definition: "CON la letra A. Protocolo que traduce una direcci칩n IP conocida a una direcci칩n MAC en una red local.", answer: "ARP" },
            { id: 'B', definition: "CON la letra B. Dispositivo de red que conecta segmentos de una red local a nivel de la capa de enlace (Capa 2), reenviando tramas bas치ndose en direcciones MAC.", answer: "SWITCH" },
            { id: 'C', definition: "CON la letra C. Protocolo seguro que se utiliza para establecer una conexi칩n remota a un servidor de forma cifrada (Secure Shell).", answer: "SSH" },
            { id: 'D', definition: "CON la letra D. Protocolo que asigna autom치ticamente direcciones IP y otra configuraci칩n de red a los *hosts*.", answer: "DHCP" },
            { id: 'E', definition: "CON la letra E. Tecnolog칤a de red local con cable m치s com칰n, definida en el est치ndar IEEE 802.3.", answer: "ETHERNET" },
            { id: 'F', definition: "CON la letra F. Protocolo est치ndar de red utilizado para la transferencia de archivos entre un cliente y un servidor.", answer: "FTP" },
            { id: 'G', definition: "CON la letra G. Protocolo est치ndar utilizado por los *routers* para intercambiar informaci칩n de enrutamiento y determinar las mejores rutas (Su acr칩nimo es BGP).", answer: "BGP" },
            { id: 'H', definition: "CON la letra H. Protocolo fundamental para la transferencia de documentos de hipertexto en la World Wide Web.", answer: "HTTP" },
            { id: 'I', definition: "CON la letra I. Siglas de la capa de red principal del modelo TCP/IP, responsable del direccionamiento y enrutamiento de paquetes.", answer: "IP" },
            { id: 'J', definition: "CONTIENE la letra J. T칠rmino en ingl칠s para el retraso o el tiempo que tarda un paquete en viajar desde el origen hasta el destino en una red.", answer: "LATENCIA" },
            { id: 'K', definition: "CONTIENE la letra K. Tipo de cable de red trenzado que se utiliza com칰nmente en las redes Ethernet cableadas.", answer: "PAR TRENZADO" },
            { id: 'L', definition: "CON la letra L. Red de computadoras que conecta equipos en un 치rea geogr치fica limitada, como una oficina o un edificio.", answer: "LAN" },
            { id: 'M', definition: "CON la letra M. Direcci칩n f칤sica 칰nica asignada a cada interfaz de red para ser utilizada en la capa de enlace de datos.", answer: "MAC" },
            { id: 'N', definition: "CON la letra N. Mecanismo de reescritura de direcciones IP y puertos que permite que m칰ltiples dispositivos privados compartan una 칰nica direcci칩n IP p칰blica.", answer: "NAT" },
            { id: '칌', definition: "CONTIENE la letra 칌. Se dice del proceso de enviar un mismo mensaje o trama a todos los dispositivos de una subred.", answer: "BROADCAST" },
            { id: 'O', definition: "CON la letra O. Nombre de la capa 4 del modelo OSI, responsable de la comunicaci칩n extremo a extremo y la segmentaci칩n de datos.", answer: "TRANSPORTE" },
            { id: 'P', definition: "CON la letra P. Unidad b치sica de informaci칩n que se transmite a trav칠s de una red de conmutaci칩n de paquetes (Capa 3).", answer: "PAQUETE" },
            { id: 'Q', definition: "CONTIENE la letra Q. Protocolo de enrutamiento interior (Interior Gateway Protocol) de tipo vector distancia, com칰nmente utilizado en redes peque침as (Su acr칩nimo es RIP).", answer: "RIP" },
            { id: 'R', definition: "CON la letra R. Dispositivo de red que interconecta redes distintas, reenviando paquetes bas치ndose en direcciones IP y tablas de enrutamiento.", answer: "ROUTER" },
            { id: 'S', definition: "CON la letra S. Protocolo simple de transferencia de correo electr칩nico, utilizado para enviar mensajes entre servidores.", answer: "SMTP" },
            { id: 'T', definition: "CON la letra T. Protocolo de capa de transporte orientado a conexi칩n que garantiza la entrega confiable y el orden de los datos.", answer: "TCP" },
            { id: 'U', definition: "CON la letra U. Protocolo de capa de transporte sin conexi칩n y no confiable, utilizado para streaming o DNS, donde la velocidad es prioritaria.", answer: "UDP" },
            { id: 'V', definition: "CON la letra V. Red l칩gica que segmenta una red f칤sica 칰nica en varios dominios de *broadcast* separados.", answer: "VLAN" },
            { id: 'W', definition: "CONTIENE la letra W. Nombre de la tecnolog칤a de red inal치mbrica que permite la interconexi칩n de equipos sin cables.", answer: "WIFI" },
            { id: 'X', definition: "CONTIENE la letra X. Servicio que traduce nombres de dominio legibles a direcciones IP (Su acr칩nimo es DNS).", answer: "DNS" },
            { id: 'Y', definition: "CONTIENE la letra Y. Nombre del dispositivo que se coloca en la frontera de una red privada para protegerla de tr치fico no deseado (en ingl칠s, *Gateway*).", answer: "PUERTA DE ENLACE" },
            { id: 'Z', definition: "CON la letra Z. Se dice del tipo de subred que contiene la puerta de enlace, a menudo usada para servidores p칰blicos, cuyo nombre significa 'zona desmilitarizada'.", answer: "DMZ" }
        ];

        let roscoState = [];
        let currentIndex = 0;
        let correctCount = 0;
        let incorrectCount = 0;
        let isGameRunning = false;
        
        const roscoContainer = document.getElementById('rosco-container');
        const currentLetterDisplay = document.getElementById('current-letter');
        const definitionDisplay = document.getElementById('definition');
        const answerInput = document.getElementById('answer-input');
        const submitButton = document.getElementById('submit-button');
        const passButton = document.getElementById('pass-button');
        const startButton = document.getElementById('start-button');
        const scoreCorrect = document.getElementById('score-correct');
        const scoreIncorrect = document.getElementById('score-incorrect');
        const scoreRemaining = document.getElementById('score-remaining');
        const finalMessage = document.getElementById('final-message');

        // --- 1. SETUP INICIAL ---

        /**
         * Inicializa el estado del Rosco y la interfaz.
         */
        function initializeGame() {
            // Inicializar estado de las 27 letras (A-Z, 칌)
            roscoState = wordBank.map((word, index) => ({
                ...word,
                index: index,
                status: 'default' // 'default', 'current', 'correct', 'incorrect', 'passed'
            }));

            currentIndex = 0;
            correctCount = 0;
            incorrectCount = 0;
            isGameRunning = false;
            finalMessage.style.display = 'none';

            // 1. Dibuja el Rosco en el HTML
            drawRosco();

            // 2. Resetea puntuaci칩n
            updateScoreBoard();
            
            // 3. Resetea el 치rea de pregunta
            currentLetterDisplay.textContent = 'A - Z';
            definitionDisplay.textContent = 'Pulsa "Empezar Rosco" para iniciar la partida.';
            answerInput.value = '';
            
            // 4. Habilita/Deshabilita controles
            answerInput.disabled = true;
            submitButton.disabled = true;
            passButton.disabled = true;
            startButton.style.display = 'block';
        }

        /**
         * Dibuja los slots de las letras en el c칤rculo.
         */
        function drawRosco() {
            roscoContainer.innerHTML = '';
            const totalSlots = roscoState.length;
            const angleStep = 360 / totalSlots;

            roscoState.forEach((item, index) => {
                const angle = index * angleStep - 90; // -90 para empezar arriba
                const rad = angle * (Math.PI / 180); // Convertir a radianes

                // F칩rmula para posici칩n en c칤rculo: (R * cos(치ngulo), R * sen(치ngulo))
                const x = CENTER_OFFSET + ROPE_RADIUS * Math.cos(rad) - (SLOT_SIZE / 2);
                const y = CENTER_OFFSET + ROPE_RADIUS * Math.sin(rad) - (SLOT_SIZE / 2);

                const slot = document.createElement('div');
                slot.className = `letter-slot status-${item.status}`;
                slot.id = `slot-${item.id}`;
                slot.textContent = item.id;
                slot.style.left = `${x}px`;
                slot.style.top = `${y}px`;
                roscoContainer.appendChild(slot);
            });
        }
        
        // --- 2. L칍GICA DEL JUEGO ---

        /**
         * Empieza el rosco, buscando la primera letra pendiente.
         */
        function startGame() {
            isGameRunning = true;
            startButton.style.display = 'none';
            answerInput.disabled = false;
            submitButton.disabled = false;
            passButton.disabled = false;
            
            // Busca la primera letra pendiente
            currentIndex = roscoState.findIndex(item => item.status === 'default' || item.status === 'passed');
            if (currentIndex !== -1) {
                loadCurrentQuestion();
            } else {
                // Si todo ya est치 completado/marcado, termina el juego inmediatamente
                endGame();
            }
        }

        /**
         * Busca la siguiente letra que est칠 en estado 'default' o 'passed'.
         */
        function findNextQuestionIndex() {
            // Recorre desde la posici칩n actual + 1 hasta el final
            for (let i = currentIndex + 1; i < roscoState.length; i++) {
                if (roscoState[i].status === 'default' || roscoState[i].status === 'passed') {
                    return i;
                }
            }
            // Recorre desde el inicio hasta la posici칩n actual
            for (let i = 0; i < currentIndex; i++) {
                if (roscoState[i].status === 'default' || roscoState[i].status === 'passed') {
                    return i;
                }
            }
            // Si no encuentra ninguna, devuelve -1
            return -1;
        }

        /**
         * Carga la pregunta actual en la interfaz.
         */
        function loadCurrentQuestion() {
            if (currentIndex === -1) {
                return; // No hay m치s preguntas
            }

            // Desmarcar la letra anterior si no es la primera
            roscoState.forEach((item, index) => {
                if (item.status === 'current') {
                    // Si el estado anterior era 'default', vuelve a 'default'. Si era 'passed', vuelve a 'passed'.
                    item.status = (item.statusBeforeCurrent === 'default' ? 'default' : 'passed');
                    delete item.statusBeforeCurrent; // Limpiamos el estado temporal
                }
                document.getElementById(`slot-${item.id}`).className = `letter-slot status-${item.status}`;
            });
            
            const currentItem = roscoState[currentIndex];
            currentItem.statusBeforeCurrent = currentItem.status; // Guardar el estado anterior
            currentItem.status = 'current';

            // Actualizar el slot en el Rosco
            document.getElementById(`slot-${currentItem.id}`).className = `letter-slot status-current`;

            // Actualizar el 치rea de juego
            currentLetterDisplay.textContent = currentItem.id;
            definitionDisplay.textContent = currentItem.definition;
            answerInput.value = '';
            answerInput.focus();
        }

        /**
         * Procesa la respuesta del usuario.
         * @param {string} action - 'submit' o 'pass'.
         */
        function processAnswer(action) {
            if (!isGameRunning || currentIndex === -1) return;

            const currentItem = roscoState[currentIndex];
            let nextIndex = -1;

            if (action === 'submit') {
                // Normaliza la respuesta del usuario (quita espacios y acentos/tilde)
                const normalize = (str) => str.trim().toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                
                const userAnswer = normalize(answerInput.value);
                const correctAnswer = normalize(currentItem.answer);

                if (userAnswer === correctAnswer) {
                    currentItem.status = 'correct';
                    correctCount++;
                } else {
                    currentItem.status = 'incorrect';
                    incorrectCount++;
                }
                
                // Aplicar color final y limpiar estado temporal
                document.getElementById(`slot-${currentItem.id}`).className = `letter-slot status-${currentItem.status}`;
                delete currentItem.statusBeforeCurrent;

                nextIndex = findNextQuestionIndex();
            } else if (action === 'pass') {
                // Si la letra ya estaba pasada, permanece pasada, si era 'default' pasa a 'passed'.
                currentItem.status = 'passed'; 
                
                document.getElementById(`slot-${currentItem.id}`).className = `letter-slot status-passed`;
                delete currentItem.statusBeforeCurrent;
                
                nextIndex = findNextQuestionIndex();
            }

            updateScoreBoard();

            if (nextIndex === -1) {
                // No hay m치s preguntas pendientes, terminar el juego
                endGame();
            } else {
                // Continuar a la siguiente pregunta
                currentIndex = nextIndex;
                loadCurrentQuestion();
            }
        }

        /**
         * Actualiza el marcador.
         */
        function updateScoreBoard() {
            const remaining = roscoState.filter(item => item.status === 'default' || item.status === 'passed').length;
            
            scoreCorrect.textContent = `Aciertos: ${correctCount}`;
            scoreIncorrect.textContent = `Fallos: ${incorrectCount}`;
            scoreRemaining.textContent = `Pendientes: ${remaining}`;
        }

        /**
         * Finaliza el juego y muestra el mensaje final.
         */
        function endGame() {
            isGameRunning = false;
            answerInput.disabled = true;
            submitButton.disabled = true;
            passButton.disabled = true;
            startButton.textContent = "Reiniciar Rosco";
            startButton.style.display = 'block';

            let message;
            if (correctCount === roscoState.length) {
                message = `춰FELICIDADES! 춰Has completado el Rosco con ${correctCount} aciertos! 춰Pleno!`;
                finalMessage.style.borderColor = '#43a047';
                finalMessage.style.backgroundColor = '#e8f5e9';
            } else {
                message = `Rosco finalizado. Aciertos: ${correctCount}, Fallos: ${incorrectCount}. Quedan ${roscoState.length - (correctCount + incorrectCount)} palabras.`;
                finalMessage.style.borderColor = '#ff9800';
                finalMessage.style.backgroundColor = '#fff8e1';
            }
            
            currentLetterDisplay.textContent = '춰FIN DEL ROSCO!';
            definitionDisplay.textContent = '';
            finalMessage.textContent = message;
            finalMessage.style.display = 'block';
        }

        // --- 3. MANEJADORES DE EVENTOS ---

        // Iniciar/Reiniciar el juego
        startButton.addEventListener('click', () => {
            if (startButton.textContent === "Reiniciar Rosco") {
                initializeGame(); // Reiniciar variables y Rosco
            }
            startGame();
        });

        // Bot칩n Enviar
        submitButton.addEventListener('click', () => processAnswer('submit'));

        // Bot칩n Pasapalabra
        passButton.addEventListener('click', () => processAnswer('pass'));

        // Tecla Enter para Enviar (mientras el input est치 activo)
        answerInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault(); 
                processAnswer('submit');
            }
        });

        // Inicializa el juego al cargar la p치gina
        initializeGame();
    </script>
</body>
</html>